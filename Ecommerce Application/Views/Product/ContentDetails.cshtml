@model Ecommerce_Application.Models.ProductDetails
@using Ecommerce_Application.Repositories
@inject IProductImageRepository _productImageService;

<div id="containerD">
    <div id="imageSection">
        <img id="imgDetails" src=@Model.ThumbImage>
    </div>
    <div id="productDetails">
        <h1>@Model.ProductName</h1>

        <div id="details">
            <h3 id="ProductName">@Model.ProductName</h3>
            <h4>@Model.BrandName</h4>
            <sup>₹</sup><h2 id="ProductPrice">@Model.SellingPrice</h2>
            <del><h4>MRP @Model.Price</h4></del>
        </div>
        <div id="productPreview">
            <h3>Product Preview</h3>
            @{
                var AllImage = await _productImageService.GetAllImagesById(Model.ProductId);

                foreach (var images in AllImage)
                {
                        <img class="previewImg" id="previewImg" src="@images.ImagePath">
                }
            }
        </div>
        <div id="button"><button>Add to Cart</button></div>
    </div>
</div>


@section Images {
    <script>

        $(document).ready(function () {
            $(".previewImg").click(function () {
                var changeSrc = $(this).attr("src")
                $("#imgDetails").attr("src", changeSrc);
                $('.selected').removeClass('selected');
                $(this).addClass('selected');

            });


            // $('#button').click(function (e) {
            //     e.preventDefault();
            //     debugger
            //     var ProductName = $("#ProductName").html;
            //         var ProductPrice = $("#ProductPrice");
            //         var obj = {
            //             prodName: ProductName,
            //             prodPrice: ProductPrice
            //         };
            //         AfterClick(obj);
                
            // });

            // function AfterClick(obj) {
            //     $.ajax({
            //         url: '@Url.Action("ContentDetails", "Product")',
            //         method: 'POST',
            //         data: obj,
            //         datatype: 'json',
            //         success: function (data) {
            //             debugger
            //             console.log('Submission was successful.');
            //             localStorage.setItem('Product_Name', obj.prodName);
            //             localStorage.setItem('Product_Price', obj.prodPrice);
            //         },
            //         error: function (error) {
            //             console.log('An error occurred.');
            //             console.log(error);
            //         }
            //     });
            // }

        });

    </script>
}

